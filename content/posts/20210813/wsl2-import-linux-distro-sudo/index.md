---
title: "WSL2にインポートしたLinuxディストリビューションに追加したユーザーでsudoコマンドが使えない"
date: 2021-08-13T17:44:55+09:00
draft: false
---

[前回]({{< ref "/posts/20210806/wsl2-multiple-linux-distribution" >}})、WSL2にLinuxディストリビューションをインポートして使い捨ての開発環境を手に入れようという記事を書きました。  

そのあと、LunarVimを入れて遊んでみよーと思ったところ、**追加したユーザーではなぜかsudoコマンドが使えず色々と困ったので追加したユーザーでsudoコマンドを使えるようにしていきたいと思います。**  

## インポートしたLinuxディストリビューションに追加したユーザーでsudoコマンドを使えるようにする

先に結論から話すと、次のことを行いました。  

- そもそもsudoコマンドが入っていなかったので、sudoコマンドをインストールした。
- sudoコマンドを追加したユーザーでも使えるようにした。

### sudoコマンドをインストール

wsl2を起動して追加したLinuxディストリビューションを立ち上げると、追加したユーザーでログインするようになっています。  

`which sudo`でsudoコマンドがないことを確認しました。  

sudoコマンドをインストールするために、rootユーザーに切り替えます。  

wsl2の場合は、下記でrootユーザーに切り替えられました。  

PowerShellで次のコマンドを打ちます。  

```
wsl -d Ubuntu-20.04_dev -u root
```

sudoコマンドをインストールしていきます。  

```
apt install sudo
```

`which sudo`でsudoコマンドがインストールされていることを確認します。  

### 追加したユーザーをsudoグループに追加

下記コマンドで、指定したユーザーをsudoグループに追加します。

```
usermod -G sudo [ユーザー名]
```

sudoグループに指定したユーザー名が追加されているか確認します。  
```
cat /etc/group | grep sudo
```

`sudo whoami`をしてsudoグループに追加された場合は、パスワードが求められ入力して`root`と表示されればOKです。  
```
sudo whoami
```

これで追加したユーザーでもsudoコマンドが使えるようになりました！  
